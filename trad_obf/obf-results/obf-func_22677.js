function _0x3db6(){const _0x5ee1d9=['nCEWY','--color=never','qPwTF','split','git','ytlYf','deploy.remote','node_modules','uXLEj','Oeoqj','catch','The\x20deploy\x20repository\x20is\x20up\x20to\x20date\x20already,\x20exiting.','UBQvq','--init','nnlPL','capture','need_build','Sajkh','type','LYImt','jdwex','-rf','deploy_branch','1599545LHbhuE','Hwqqm','GUfdp','rev-parse','remote','UUIAl','IGhsJ','QBJQr','remote_branch','then','ySvzC','DFKyX','shift','kAezg','BYhJw','mUDxN','submodule_ref','FlRAF','deploy.submodule','commit',':/opt/service','\x20to\x20','ZjiUR','eFAxt','153210SIkcqt','BjVKm','XnLKW','length','.*\x5c.git.*|.*\x5c.md|.*readme|.*licence','PUuZS','chdir','XdZgr','log','src_branch','package.json','JOhyd','test','master','ehcXF','WWXOK','--short','push','Darwin','--all','\x20with\x20the\x20commit:','XHfle','resolve','HcPON','AAiuS','2765024gVAXnJ','review','wMXqf','RjZpb','30JZsdLC','25543hcBxWT','gVSZY','-exec','sync-repo','remote_name','OoHrP','origin','sqLRR','BJmaj','-regextype','wYgag','name','update','submodule','prototype','..origin/','nCuXD','14MBXrdB','lbmVR','add','props','checkout','origin/','214149DOAFqt','node_modules/','GpvPp','aioyj','puyxT','\x0a\x0aChanges\x20sent\x20to\x20Gerrit\x20for\x20review!','leYaE','AnCin','QIuCE','cVVJx','useErrHandler','src','GPuJm','exit','sHrQp','15381NZqyas','dir','commit_msg','Timbu','raAQB','config','110Mfwphm','130792cBOrzc','xlyFw','symlinkAsync','-iregex'];_0x3db6=function(){return _0x5ee1d9;};return _0x3db6();}(function(_0x58c962,_0x29d20e){const _0x444c06=_0x4dab,_0x3b10e8=_0x58c962();while(!![]){try{const _0xdebeb1=-parseInt(_0x444c06(0x163))/0x1+-parseInt(_0x444c06(0x15d))/0x2*(-parseInt(_0x444c06(0x12e))/0x3)+parseInt(_0x444c06(0x179))/0x4+-parseInt(_0x444c06(0x116))/0x5+-parseInt(_0x444c06(0x14b))/0x6*(-parseInt(_0x444c06(0x14c))/0x7)+parseInt(_0x444c06(0x147))/0x8+-parseInt(_0x444c06(0x172))/0x9*(parseInt(_0x444c06(0x178))/0xa);if(_0xdebeb1===_0x29d20e)break;else _0x3b10e8['push'](_0x3b10e8['shift']());}catch(_0x2ef085){_0x3b10e8['push'](_0x3b10e8['shift']());}}}(_0x3db6,0x311f4));function _0x4dab(_0x13c579,_0x9fef98){const _0x3db619=_0x3db6();return _0x4dab=function(_0x4dab55,_0x2b5c9e){_0x4dab55=_0x4dab55-0x10b;let _0x516448=_0x3db619[_0x4dab55];return _0x516448;},_0x4dab(_0x13c579,_0x9fef98);}function updateDeploy(){const _0x23a376=_0x4dab,_0x5c9b83={'OoHrP':_0x23a376(0x181),'lbmVR':function(_0x1876ef,_0x229a12){return _0x1876ef||_0x229a12;},'uXLEj':function(_0x59dc6b,_0x1d0237){return _0x59dc6b===_0x1d0237;},'Hwqqm':function(_0x5a0724,_0x58835e,_0x51701a){return _0x5a0724(_0x58835e,_0x51701a);},'AnCin':function(_0xec9199,_0x3159ed){return _0xec9199===_0x3159ed;},'BjVKm':_0x23a376(0x152),'XHfle':'master','eFAxt':function(_0x163c1e,_0x5ff7f2){return _0x163c1e(_0x5ff7f2);},'XdZgr':_0x23a376(0x161),'QIuCE':'fetch','Cydnt':_0x23a376(0x14f),'UUIAl':_0x23a376(0x159),'nnlPL':'status','WWXOK':function(_0x4c0fbd,_0x52d5ea){return _0x4c0fbd(_0x52d5ea);},'AAiuS':_0x23a376(0x13e),'bqKFz':'--reverse','cVVJx':'--name-only','JOhyd':'update','HcPON':_0x23a376(0x10c),'dzINH':'find','PUuZS':_0x23a376(0x17c),'nCEWY':_0x23a376(0x132),'GxcHw':'-exec','puyxT':_0x23a376(0x155),'qPwTF':'(.*\x5c.git.*|.*\x5c.md|.*readme|.*licence)','DFKyX':_0x23a376(0x114),'ClAMX':'xxxxxxx\x20Update\x20node\x20module\x20dependencies\x0a','wYgag':_0x23a376(0x184),'wMXqf':_0x23a376(0x168),'GUfdp':'\x0a\x0aChanges\x20are\x20sitting\x20in\x20the\x20sync-repo\x20branch\x20in','LYImt':function(_0x396ccc,_0x548d10,_0x5b1b43){return _0x396ccc(_0x548d10,_0x5b1b43);},'xoLrn':_0x23a376(0x148),'leYaE':'deploy.name','ytlYf':_0x23a376(0x177),'xlyFw':function(_0x26becd,_0x2b1a9e,_0x3ad5ee){return _0x26becd(_0x2b1a9e,_0x3ad5ee);},'aioyj':function(_0x4cde6e,_0x1df79f,_0x2da847){return _0x4cde6e(_0x1df79f,_0x2da847);},'BYhJw':'deploy.srcbranch'};function _0x568ea4(_0x41433d,_0x70403a){const _0x51d466=_0x23a376,_0x286ade=[_0x5c9b83[_0x51d466(0x151)]];return Array[_0x51d466(0x15a)][_0x51d466(0x13f)]['apply'](_0x286ade,_0x41433d),_0x70403a=_0x5c9b83[_0x51d466(0x15e)](_0x70403a,{}),_0x70403a[_0x51d466(0x10e)]=_0x70403a[_0x51d466(0x10e)]===undefined?!![]:_0x70403a[_0x51d466(0x10e)],_0x70403a['useErrHandler']=_0x5c9b83['uXLEj'](_0x70403a[_0x51d466(0x16d)],undefined)?!![]:_0x70403a[_0x51d466(0x16d)],_0x5c9b83[_0x51d466(0x117)](promisedSpawn,_0x286ade,_0x70403a);}function _0x54a0f8(_0x3f9772,_0x33b60a){const _0x522354=_0x23a376,_0x51d68c=_0x3f9772[_0x522354(0x122)]();if(!_0x51d68c)return P[_0x522354(0x144)]();return _0x5c9b83['Hwqqm'](_0x568ea4,_0x51d68c,_0x33b60a)[_0x522354(0x11f)](_0x40005f=>{const _0x17ffa0=_0x522354;if(_0x5c9b83[_0x17ffa0(0x16a)](_0x3f9772[_0x17ffa0(0x131)],0x0))return P[_0x17ffa0(0x144)](_0x40005f);return _0x5c9b83[_0x17ffa0(0x117)](_0x54a0f8,_0x3f9772,_0x33b60a);});}return P[_0x23a376(0x160)]({'name':_0x568ea4([_0x23a376(0x177),_0x5c9b83[_0x23a376(0x169)]],{'ignoreErr':!![]}),'remote':_0x5c9b83['LYImt'](_0x568ea4,[_0x5c9b83[_0x23a376(0x182)],_0x23a376(0x183)],{'ignoreErr':!![]}),'submodule_ref':_0x5c9b83[_0x23a376(0x17a)](_0x568ea4,[_0x5c9b83[_0x23a376(0x182)],_0x23a376(0x128)],{'ignoreErr':!![]}),'deploy_branch':_0x5c9b83['LYImt'](_0x568ea4,[_0x5c9b83[_0x23a376(0x182)],'deploy.deploybranch'],{'ignoreErr':!![]}),'src_branch':_0x5c9b83[_0x23a376(0x166)](_0x568ea4,[_0x5c9b83['ytlYf'],_0x5c9b83[_0x23a376(0x124)]],{'ignoreErr':!![]})})[_0x23a376(0x11f)](_0xcb2b8=>{const _0x5efffb=_0x23a376;return opts['name']=_0xcb2b8[_0x5efffb(0x157)]||pkg[_0x5efffb(0x157)],opts[_0x5efffb(0x150)]=_0xcb2b8[_0x5efffb(0x11a)]||_0x5c9b83[_0x5efffb(0x12f)],opts[_0x5efffb(0x126)]=_0xcb2b8[_0x5efffb(0x126)]||'https://gerrit.wikimedia.org/r/mediawiki/services/'+opts[_0x5efffb(0x157)],opts[_0x5efffb(0x137)]=_0xcb2b8[_0x5efffb(0x137)]||_0x5c9b83[_0x5efffb(0x143)],opts[_0x5efffb(0x115)]=_0xcb2b8[_0x5efffb(0x115)]||_0x5c9b83['XHfle'],opts[_0x5efffb(0x11e)]=opts[_0x5efffb(0x150)]+'/'+opts[_0x5efffb(0x115)],process[_0x5efffb(0x134)](opts[_0x5efffb(0x173)]),_0x5c9b83[_0x5efffb(0x12d)](_0x54a0f8,[[_0x5c9b83[_0x5efffb(0x135)],_0x5c9b83['XHfle']],[_0x5c9b83[_0x5efffb(0x16b)],_0x5efffb(0x141)],[_0x5efffb(0x161),'-B',_0x5c9b83['Cydnt'],opts[_0x5efffb(0x11e)]],[_0x5c9b83[_0x5efffb(0x11b)],_0x5c9b83[_0x5efffb(0x10d)]]]);})[_0x23a376(0x11f)](_0x187adc=>{const _0x29b352=_0x23a376,_0x567676={'ZHtQy':_0x5c9b83[_0x29b352(0x135)],'XnLKW':function(_0x1b299c,_0x76d9a4){const _0x31dfc1=_0x29b352;return _0x5c9b83[_0x31dfc1(0x13d)](_0x1b299c,_0x76d9a4);},'RjZpb':_0x5c9b83[_0x29b352(0x146)],'UOWyH':'--no-merges','nCuXD':_0x5c9b83['bqKFz'],'RPdxK':_0x29b352(0x17e),'gVSZY':_0x5c9b83[_0x29b352(0x16b)],'ySvzC':_0x5c9b83['BjVKm'],'GPuJm':_0x5c9b83[_0x29b352(0x16c)]};return _0x187adc?(opts[_0x29b352(0x159)]=_0x187adc[_0x29b352(0x180)]('\x20')[0x1],_0x5c9b83['WWXOK'](_0x568ea4,[_0x5c9b83[_0x29b352(0x11b)],_0x5c9b83[_0x29b352(0x139)],_0x5c9b83['HcPON']])[_0x29b352(0x11f)](()=>{const _0x2e8516=_0x29b352,_0x40bda2={'ehcXF':function(_0x1c2746,_0x359cf2){const _0x13fc32=_0x4dab;return _0x567676[_0x13fc32(0x130)](_0x1c2746,_0x359cf2);},'jdwex':_0x2e8516(0x119),'TDgAd':_0x567676[_0x2e8516(0x14a)],'kAezg':'--oneline','QBJQr':_0x567676['UOWyH'],'sHrQp':_0x567676[_0x2e8516(0x15c)],'BJmaj':_0x567676['RPdxK'],'ZjiUR':function(_0xa184d4,_0x1b0219){return _0xa184d4(_0x1b0219);}};return process[_0x2e8516(0x134)](opts[_0x2e8516(0x173)]+'/'+opts[_0x2e8516(0x159)]),_0x54a0f8([[_0x567676[_0x2e8516(0x14d)],_0x567676[_0x2e8516(0x120)]],['diff',_0x567676[_0x2e8516(0x16f)],_0x2e8516(0x162)+opts[_0x2e8516(0x137)]]])[_0x2e8516(0x11f)](_0x5f23f8=>{const _0x55085f=_0x2e8516;return/package\.json/[_0x55085f(0x13a)](_0x5f23f8)&&(opts[_0x55085f(0x10f)]=!![]),_0x40bda2[_0x55085f(0x13c)](_0x568ea4,[_0x40bda2[_0x55085f(0x113)],_0x40bda2['TDgAd'],'origin/'+opts[_0x55085f(0x137)]]);})[_0x2e8516(0x11f)](_0x194624=>{const _0x3ca8a1=_0x2e8516;return opts['commit_msg']='Update\x20'+opts[_0x3ca8a1(0x157)]+_0x3ca8a1(0x12b)+_0x194624+'\x0a\x0a',_0x40bda2[_0x3ca8a1(0x13c)](_0x568ea4,[_0x3ca8a1(0x136),_0x3ca8a1(0x15b)+opts[_0x3ca8a1(0x137)],_0x40bda2[_0x3ca8a1(0x123)],_0x40bda2[_0x3ca8a1(0x11d)],_0x40bda2[_0x3ca8a1(0x171)],_0x40bda2[_0x3ca8a1(0x154)]]);})['then'](_0x27f3b8=>{const _0x20766f=_0x2e8516;if(!_0x27f3b8&&!opts[_0x20766f(0x10f)])return process[_0x20766f(0x134)](opts['dir']),_0x568ea4([_0x567676['ZHtQy'],_0x20766f(0x13b)])[_0x20766f(0x11f)](()=>{const _0x41c560=_0x20766f;console[_0x41c560(0x136)](_0x41c560(0x188)),process[_0x41c560(0x170)](0x0);});else{if(_0x27f3b8)_0x27f3b8+='\x0a';else!_0x27f3b8&&(_0x27f3b8='');}return opts[_0x20766f(0x174)]+='List\x20of\x20changes:\x0a'+_0x27f3b8,_0x568ea4([_0x567676['ZHtQy'],_0x20766f(0x162)+opts['src_branch']]);})[_0x2e8516(0x11f)](()=>{const _0x3673a6=_0x2e8516;return process['chdir'](opts[_0x3673a6(0x173)]),_0x40bda2[_0x3673a6(0x12c)](_0x568ea4,['add',opts[_0x3673a6(0x159)]]);});})):(opts[_0x29b352(0x159)]=_0x29b352(0x16e),opts[_0x29b352(0x10f)]=!![],opts['commit_msg']='Initial\x20import\x20of\x20'+opts[_0x29b352(0x157)],_0x568ea4([_0x5c9b83[_0x29b352(0x11b)],_0x29b352(0x15f),opts[_0x29b352(0x126)],opts[_0x29b352(0x159)]]));})[_0x23a376(0x11f)](()=>fs[_0x23a376(0x17b)](opts[_0x23a376(0x159)]+'/package.json',_0x23a376(0x138))[_0x23a376(0x187)](()=>{})[_0x23a376(0x11f)](()=>_0x568ea4([_0x23a376(0x15f),_0x23a376(0x138)])))['then'](()=>{const _0x147763=_0x23a376,_0x1f78b4={'IGhsJ':function(_0x1192fa,_0x47cb96){const _0x481989=_0x4dab;return _0x5c9b83[_0x481989(0x185)](_0x1192fa,_0x47cb96);},'FlRAF':_0x5c9b83['dzINH'],'raAQB':'node_modules/','GpvPp':_0x5c9b83[_0x147763(0x133)],'mUDxN':_0x5c9b83[_0x147763(0x17d)],'abKmo':_0x5c9b83['GxcHw'],'Sajkh':_0x5c9b83[_0x147763(0x167)],'UBQvq':_0x5c9b83[_0x147763(0x17f)],'Timbu':_0x5c9b83[_0x147763(0x121)],'Oeoqj':function(_0x38060b,_0x4b02a8,_0x5869a9){const _0x55078f=_0x147763;return _0x5c9b83[_0x55078f(0x117)](_0x38060b,_0x4b02a8,_0x5869a9);}};if(!opts['need_build'])return;return!/^initial/i['test'](opts[_0x147763(0x174)])&&(opts[_0x147763(0x174)]+=_0x5c9b83['ClAMX']),_0x5c9b83[_0x147763(0x117)](_0x568ea4,['rm','-r',_0x5c9b83[_0x147763(0x156)]],{'ignoreErr':!![]})[_0x147763(0x11f)](()=>promisedSpawn(['rm',_0x147763(0x114),_0x147763(0x184)],{'capture':!![],'ignoreErr':!![]}))[_0x147763(0x11f)](()=>startContainer(['-v',opts['dir']+_0x147763(0x12a),'-w','/opt/service'],!![]))[_0x147763(0x11f)](()=>{const _0x1601d5=_0x147763;let _0x263ea7;return _0x1f78b4[_0x1601d5(0x11c)](os[_0x1601d5(0x111)](),_0x1601d5(0x140))?_0x263ea7=[_0x1f78b4[_0x1601d5(0x127)],'-E',_0x1f78b4[_0x1601d5(0x176)],_0x1f78b4[_0x1601d5(0x165)],_0x1f78b4[_0x1601d5(0x125)],_0x1f78b4['abKmo'],'rm',_0x1601d5(0x114),'{}',';']:_0x263ea7=[_0x1f78b4[_0x1601d5(0x127)],_0x1601d5(0x164),_0x1f78b4[_0x1601d5(0x110)],'posix-egrep',_0x1f78b4[_0x1601d5(0x165)],_0x1f78b4[_0x1601d5(0x10b)],_0x1601d5(0x14e),'rm',_0x1f78b4[_0x1601d5(0x175)],'{}',';'],_0x1f78b4[_0x1601d5(0x186)](promisedSpawn,_0x263ea7,{'capture':!![],'ignoreErr':!![]});})[_0x147763(0x11f)](()=>_0x568ea4([_0x147763(0x15f),'node_modules']));})[_0x23a376(0x11f)](()=>_0x568ea4([_0x23a376(0x129),'-m',opts[_0x23a376(0x174)]]))['then'](()=>{const _0x2610d6=_0x23a376,_0x82423e={'sqLRR':_0x5c9b83[_0x2610d6(0x149)]};if(!opts['review']){console[_0x2610d6(0x136)](_0x5c9b83[_0x2610d6(0x118)]),console[_0x2610d6(0x136)](opts[_0x2610d6(0x173)]+_0x2610d6(0x142)),console['log'](opts[_0x2610d6(0x174)]);return;}return _0x5c9b83[_0x2610d6(0x112)](_0x54a0f8,[[_0x5c9b83['xoLrn'],'-R',opts[_0x2610d6(0x115)]],[_0x5c9b83[_0x2610d6(0x135)],_0x2610d6(0x13b)],[_0x2610d6(0x159),_0x2610d6(0x158),_0x5c9b83[_0x2610d6(0x145)]]],{'capture':![]})['then'](()=>{const _0x45cad6=_0x2610d6;console['log'](_0x82423e[_0x45cad6(0x153)]);});});}